{"version":3,"file":"lisa-bot.common.js","sources":["esm/src/clients/discord/commands/core/AboutCommand.js","esm/src/clients/discord/commands/core/InviteCommand.js","esm/src/clients/discord/commands/core/ServersCommand.js","esm/src/clients/discord/LisaDiscordClient.js","esm/src/mode.js","esm/src/logger.js","esm/src/main.js"],"sourcesContent":["import { Command } from \"discord.js-commando\";\nconst IMAGE_LINK = \"http://static.tumblr.com/df323b732955715fe3fb5a506999afc7/\" +\n    \"rflrqqy/H9Cnsyji6/tumblr_static_88pgfgk82y4ok80ckowwwwow4.jpg\";\nconst ABOUT_MESSAGE = `Hello!\nI am Lisa, an indoor plant, inspired by Lisa from 'Life is Strange'.\n<http://dontnodentertainment.wikia.com/wiki/Lisa_the_Plant>\n----------\nFor more information, use \\`$help\\` or go to <https://github.com/FelixRilling/lisa-bot>.\nIf you have questions or want to report a bug, message my creator: NobodyRocks#5051.`;\nclass AboutCommand extends Command {\n    constructor(client) {\n        super(client, {\n            name: \"about\",\n            aliases: [\"why\", \"info\"],\n            group: \"util\",\n            memberName: \"about\",\n            description: \"Shows info about the bot.\"\n        });\n    }\n    run(message) {\n        return message.say(ABOUT_MESSAGE, { files: [IMAGE_LINK] });\n    }\n}\nexport { AboutCommand };\n//# sourceMappingURL=AboutCommand.js.map","import { Command } from \"discord.js-commando\";\nconst INVITE_MESSAGE = `I'm always happy to join new servers!\nIf you want me to join your server, follow this link:\n<https://discordapp.com/oauth2/authorize?&client_id=263671526279086092&scope=bot>`;\nclass InviteCommand extends Command {\n    constructor(client) {\n        super(client, {\n            name: \"invite\",\n            aliases: [\"join\"],\n            group: \"util\",\n            memberName: \"invite\",\n            description: \"Add Lisa to your server.\"\n        });\n    }\n    run(message) {\n        return message.say(INVITE_MESSAGE);\n    }\n}\nexport { InviteCommand };\n//# sourceMappingURL=InviteCommand.js.map","import { Command } from \"discord.js-commando\";\nconst INVITE_MESSAGE = `I'm always happy to join new servers!\nIf you want me to join your server, follow this link:\n<https://discordapp.com/oauth2/authorize?&client_id=263671526279086092&scope=bot>`;\nclass ServersCommand extends Command {\n    constructor(client) {\n        super(client, {\n            name: \"servers\",\n            aliases: [],\n            group: \"util\",\n            memberName: \"servers\",\n            description: \"Shows the servers the bot is on.\",\n            ownerOnly: true\n        });\n    }\n    run(message) {\n        return message.say(this.getServers());\n    }\n    getServers() {\n        return this.client.guilds\n            .array()\n            .map(guild => `${guild.id}: ${guild.name}`)\n            .join(\"\\n\");\n    }\n}\nexport { ServersCommand };\n//# sourceMappingURL=ServersCommand.js.map","import { CommandoClient } from \"discord.js-commando\";\nimport { AboutCommand } from \"./commands/core/AboutCommand\";\nimport { InviteCommand } from \"./commands/core/InviteCommand\";\nimport { ServersCommand } from \"./commands/core/ServersCommand\";\nclass LisaDiscordClient {\n    constructor(options) {\n        this.commandoClient = new CommandoClient(options);\n        this.commandoClient.registry\n            .registerDefaultTypes()\n            .registerDefaultGroups()\n            .registerDefaultCommands({\n            help: true,\n            eval_: false,\n            ping: true,\n            prefix: false,\n            commandState: false\n        });\n        this.commandoClient.registry.registerCommands([\n            AboutCommand,\n            InviteCommand,\n            ServersCommand\n        ]);\n    }\n    async login(token) {\n        await this.commandoClient.login(token);\n    }\n}\nexport { LisaDiscordClient };\n//# sourceMappingURL=LisaDiscordClient.js.map","const isProductionMode = () => process.env.NODE_ENV === \"production\";\nexport { isProductionMode };\n//# sourceMappingURL=mode.js.map","import * as winston from \"winston\";\nimport { isProductionMode } from \"./mode\";\nconst logFormat = winston.format.combine(winston.format.timestamp(), winston.format.printf(({ level, message, timestamp }) => `${timestamp} [${level}]: ${message}`));\nconst rootLogger = winston.createLogger({\n    level: isProductionMode() ? \"info\" : \"debug\",\n    format: logFormat,\n    defaultMeta: { service: \"root\" },\n    transports: [new winston.transports.File({ filename: \"log/lisa-bot.log\" })]\n});\n//\n// If we're not in production then log to the `console` with the format:\n// `${info.level}: ${info.message} JSON.stringify({ ...rest }) `\n//\nif (!isProductionMode()) {\n    rootLogger.add(new winston.transports.Console());\n}\nexport { rootLogger };\n//# sourceMappingURL=logger.js.map","import { isNil } from \"lodash\";\nimport { LisaDiscordClient } from \"./clients/discord/LisaDiscordClient\";\nimport { rootLogger } from \"./logger\";\nimport { isProductionMode } from \"./mode\";\nconst logger = rootLogger.child({ service: \"main\" });\nlogger.info(\"Starting Lisa bot...\");\n/*\n * Discord Client\n */\nlogger.info(\"Starting Lisa discord client...\");\nconst discordToken = isProductionMode()\n    ? process.env.DISCORD_TOKEN\n    : process.env.DISCORD_TOKEN_TEST;\nif (isNil(discordToken)) {\n    throw new Error(\"No token set.\");\n}\nconst lisaDiscordClient = new LisaDiscordClient({\n    commandPrefix: \"$\",\n    owner: \"128985967875850240\",\n    invite: \"https://discordapp.com/oauth2/authorize?&client_id=263671526279086092&scope=bot\"\n});\nlisaDiscordClient\n    .login(discordToken)\n    .then(() => logger.info(\"Discord client connected.\"))\n    .catch(logger.error);\n//# sourceMappingURL=main.js.map"],"names":["Command","CommandoClient","winston.format","winston.createLogger","winston.transports","isNil"],"mappings":"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"}